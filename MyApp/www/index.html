<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nav</title>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"></script>
    <script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css"/>
    <style>
      :root {
        --ion-safe-area-top: 20px;
        --ion-safe-area-bottom: 22px;
      }
      *{
        margin-top: 0px;
        padding-top: 0px;
      }
      ion-toolbar{
        padding-top: 0px !important;
      }
    </style>

    <script type="module">
      import { menuController } from 'https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/index.esm.js';
      window.menuController = menuController;
    </script>
</head>
<body>    
  <ion-app>         
    
        <ion-menu side="start" content-id="main-content">
          <ion-header>
            <ion-toolbar translucent>
              <ion-title>Produtos Total: R$ 00,00</ion-title>
            </ion-toolbar>
          </ion-header>
          <ion-content>
            <ion-list>
              <ion-item>
                <ion-icon name="mail" slot="start"></ion-icon>
                <ion-chip>Pizza</ion-chip>
              </ion-item>
              <ion-item>
                <ion-icon name="paper-plane" slot="start"></ion-icon>
                <ion-chip>Hanburguer</ion-chip>
              </ion-item>
              <ion-item>
                <ion-icon name="heart" slot="start"></ion-icon>
                <ion-chip>X-Burguer</ion-chip>
              </ion-item>              
            </ion-list>
          </ion-content>
        </ion-menu>
    
        <div class="ion-page" id="main-content">
          <ion-header>
            <ion-toolbar>
              <ion-buttons slot="start">
                <ion-menu-button></ion-menu-button>
              </ion-buttons>
              <ion-title>Itens</ion-title>
            </ion-toolbar>
          </ion-header>
          <ion-content class="ion-padding">
            <ion-button expand="block" onclick="openMenu()">Open Menu</ion-button>
            <ion-nav root="nav-home">aa</ion-nav>
          </ion-content>
          
        </div>
  </ion-app>
  <script type="text/Javascript" src="js/armazem_cookies.js"></script>
  <script type="text/Javascript">
      document.addEventListener("backbutton", onBackKeyDown, false);  
      function onBackKeyDown(e) { 
        e.preventDefault(); 
        alert('Back Button is Pressed!'); 
      }
  </script>
  <script>
    async function openMenu() {
      await menuController.open();
    }
  </script>
<script>
    var storage = window.localStorage;
    /*
        var storage = window.localStorage;
        var value = storage.getItem(key); // Pass a key name to get its value.
        storage.setItem(key, value) // Pass a key name and its value to add or update that key.
        storage.removeItem(key) // Pass a key name to remove that key from storage.
    */
 
    techs = [
      {
        'title': 'Calabresa',
        'icon': 'https://image.freepik.com/vetores-gratis/icone-de-pizza-colecao-de-fast-food-icone-de-comida-isolado_138676-504.jpg',
        'description': 'Calabresa com queijo, presunto, alho, cebola, pimentão e tomate',
        'color': '#E63135'
      },
      {
        'title': 'Portuguesa',
        'icon': 'https://image.freepik.com/vetores-gratis/icone-de-pizza-colecao-de-fast-food-icone-de-comida-isolado_138676-504.jpg',
        'description': 'The latest version of cascading stylesheets - the styling language of the web!',
        'color': '#0CA9EA'
      },
      {
        'title': 'Porpetone',
        'icon': 'https://image.freepik.com/vetores-gratis/icone-de-pizza-colecao-de-fast-food-icone-de-comida-isolado_138676-504.jpg',
        'description': 'The official mascot of the Linux kernel!',
        'color': '#000'
      },
      {
        'title': 'Siciliana',
        'icon': 'https://image.freepik.com/vetores-gratis/icone-de-pizza-colecao-de-fast-food-icone-de-comida-isolado_138676-504.jpg',
        'description': 'The latest version of cascading stylesheets - the styling language of the web!',
        'color': '#0CA9EA'
      },
      {
        'title': 'Siciliana',
        'icon': 'https://image.freepik.com/vetores-gratis/icone-de-pizza-colecao-de-fast-food-icone-de-comida-isolado_138676-504.jpg',
        'description': 'The official mascot of the Linux kernel!',
        'color': '#000'
      },
      {
        'title': 'Porpetone',
        'icon': 'https://image.freepik.com/vetores-gratis/icone-de-pizza-colecao-de-fast-food-icone-de-comida-isolado_138676-504.jpg',
        'description': 'The latest version of cascading stylesheets - the styling language of the web!',
        'color': '#0CA9EA'
      },
      {
        'title': 'Portuguesa',
        'icon': 'https://image.freepik.com/vetores-gratis/icone-de-pizza-colecao-de-fast-food-icone-de-comida-isolado_138676-504.jpg',
        'description': 'The official mascot of the Linux kernel!',
        'color': '#000'
      },
      {
        'title': 'Calabresa',
        'icon': 'https://image.freepik.com/vetores-gratis/icone-de-pizza-colecao-de-fast-food-icone-de-comida-isolado_138676-504.jpg',
        'description': 'The latest version of cascading stylesheets - the styling language of the web!',
        'color': '#0CA9EA'
      },
      {
        'title': 'Calabresa',
        'icon': 'https://image.freepik.com/vetores-gratis/icone-de-pizza-colecao-de-fast-food-icone-de-comida-isolado_138676-504.jpg',
        'description': 'The official mascot of the Linux kernel!',
        'color': '#000'
      },
    ];
    storage.setItem("total", "12,00");
    var total = storage.getItem("total");

    customElements.define('nav-home', class NavHome extends HTMLElement {
      connectedCallback() {
        this.innerHTML = `
        <ion-header >
            <ion-toolbar>
              <ion-searchbar></ion-searchbar>
            </ion-toolbar>
            <ion-toolbar>
              <section>
                <header>Ordenar por:</header>
                <ion-button size="xx-small" color="primary">Cód.</ion-button>
                <ion-button size="xx-small" color="secondary">Nome</ion-button>
                <ion-button size="xx-small" color="success">Preço</ion-button>
              </section>
            </ion-toolbar>
        </ion-header>

          <ion-content fullscreen>
            <ion-list>
            ${techs.map(tech => `
                <ion-item button onclick="showDetail('${tech.title}')">
                    <img src="${tech.icon}" width="100">
                  <ion-label>
                    <h3>${tech.title}</h3>
                  </ion-label>
                  <ion-spinner name="lines"></ion-spinner>
                </ion-item>
            `).join('\n')}
            </ion-list>
          </ion-content>

          <ion-footer>
            <ion-toolbar>
              <ion-text color="primary">Total: R$ ${total}</ion-text>
              <ion-button size="xx-small" slot="end" color="primary" onclick="alert('oi');">Meus pedidos</ion-button>
            </ion-toolbar>
          </ion-footer>
        `;
      }
    });

    const nav = document.querySelector('ion-nav');

    function showDetail(title) {
      const tech = techs.find(tech => tech.title === title);
      nav.push('nav-detail', { tech });
    }

    function atualiza_total(valor){
      storage.setItem("total", valor);
      var valor_total = document.getElementById("valor_total");
      valor_total.innerText = valor;
    }

    customElements.define('nav-detail', class NavDetail extends HTMLElement {
      connectedCallback() {
        this.innerHTML = `
          <ion-header translucent>
            <ion-toolbar>
              <ion-buttons slot="start">
                <ion-back-button defaultHref="/"></ion-back-button>
              </ion-buttons>
              <ion-title>${this.tech.title}</ion-title>
            </ion-toolbar>
          </ion-header>

          <ion-content fullscreen class="ion-padding">
            <img src="${this.tech.icon}"  width="100" />
            <p>${this.tech.description}</p>
			
            <ion-list>
              <ion-item>
                <ion-label>Tamanho:</ion-label>
                <ion-select value="">
                  <ion-select-option value="grande"> Grande, R$ 28,00 </ion-select-option>
                  <ion-select-option value="media"> Média, R$ 25,00 </ion-select-option>
                  <ion-select-option value="dog"> Pequena R$ 21,00 </ion-select-option>                  
                </ion-select>
              </ion-item>

              <ion-item>
                <ion-label>Bordas</ion-label>
                
                <ion-select name="bordas" interface="popover" (ionChange)="console.log('aaaa');">
                  <ion-select-option value="catupiri">catupiri</ion-select-option>
                  <ion-select-option value="catchup">catchup</ion-select-option>
                  <ion-select-option value="recheada">recheada</ion-select-option>
                  <ion-select-option value="mostarda">mostarda</ion-select-option>
                  <ion-select-option value="samaioneseturn">maionese</ion-select-option>
                </ion-select>
              </ion-item>              
            </ion-list>

            <!-- Checkboxes in a List -->
            <ion-label>Itens Opcionais</ion-label>
            <ion-list>
              <ion-item>  
                <ion-checkbox slot="start" value="cebola" checked></ion-checkbox>
                <ion-label>Cebola, R$ 0,50</ion-label>              
              </ion-item>
              <ion-item>
                <ion-checkbox slot="start" value="alho" ></ion-checkbox>
                <ion-label>Alho, R$ 0,50</ion-label>
              </ion-item>
              <ion-item>
                <ion-checkbox slot="start" value="azeitona"></ion-checkbox>
                <ion-label>Azeitona, R$ 0,50</ion-label>
              </ion-item>
            </ion-list>
          </ion-content>

          <ion-footer>
            <ion-toolbar>
              <ion-text color="primary" id="valor_total">Total: R$ 00,00</ion-text>
              <ion-button size="xx-small" slot="end" color="primary">Adicionar</ion-button>
            </ion-toolbar>
          </ion-footer>
        `;
      }
    });
  </script>
</body>
</html>
